---
phase: 06-render-deployment
plan: 02
type: execute
wave: 2
depends_on:
  - "06-01"
files_modified: []
autonomous: false
requirements:
  - DEPLOY-01
  - DEPLOY-02
  - DEPLOY-03
  - DEPLOY-04
user_setup:
  - service: github
    why: "Public repository for Render auto-deploy"
    dashboard_config:
      - task: "Create public GitHub repository"
        location: "github.com/new or gh repo create"
  - service: render
    why: "Free tier web service hosting"
    env_vars: []
    dashboard_config:
      - task: "Create Web Service connected to GitHub repo"
        location: "Render Dashboard -> New + -> Web Service"

must_haves:
  truths:
    - "User can access the dashboard from a public URL without running python app.py locally"
    - "User visits the URL and all charts, scorecard, and hybrid builder load with correct data"
    - "Deployed app reads data.xlsx correctly with no path-related errors in the Render logs"
  artifacts: []
  key_links:
    - from: "GitHub repo main branch"
      to: "Render Web Service"
      via: "Auto-deploy on push to main"
      pattern: "render auto-deploy"
---

<objective>
Push the deployment-ready codebase to GitHub and create the Render Web Service, then verify the live deployment works.

Purpose: Complete the deployment pipeline so classmates can access the dashboard via a public URL.
Output: Live dashboard at desalination-dashboard.onrender.com (or similar).
</objective>

<execution_context>
@C:/Users/kevin/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/kevin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-render-deployment/06-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Push codebase to public GitHub repository</name>
  <files></files>
  <action>
1. **Check if GitHub repo already exists** — Run `gh repo view 2>/dev/null` to check. If it already exists and has a remote, skip creation.

2. **Create public GitHub repo** — If no remote exists, use `gh repo create desalination-dashboard --public --source=. --push` to create the repo and push in one command. If `gh` CLI is not authenticated, this becomes a checkpoint:human-action for the user to authenticate.

3. **Verify push** — Confirm all deployment files are in the remote: `Procfile`, `.python-version`, `.gitignore`, `data.xlsx`, `app.py`, `requirements.txt`, `src/`.

4. **Confirm main branch** — Ensure the default branch is `main` (Render expects this). If the local branch is `master`, rename: `git branch -M main && git push -u origin main`.

Note per user decision: The repo should be public. data.xlsx is safe for public repo — no sensitive data.
  </action>
  <verify>
    <automated>cd "C:/Users/kevin/Downloads/Desalination Project Vibe Code" && gh repo view --json name,url,isPrivate 2>/dev/null && echo "PASS: repo exists" || echo "FAIL: repo not found"</automated>
  </verify>
  <done>Public GitHub repository exists with all deployment files pushed to main branch</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Create Render Web Service and verify live deployment</name>
  <files>N/A — human action on Render dashboard</files>
  <action>
Human creates the Render Web Service and verifies the live deployment.

**What was built (automated by Claude):**
- app.py exposes `server = app.server` for gunicorn WSGI
- Procfile declares `web: gunicorn app:server --workers 2 --timeout 120`
- requirements.txt includes gunicorn==25.1.0
- .python-version pins Python 3.14
- data.xlsx is committed and will be available in the deployed environment
- Code is pushed to a public GitHub repo

**Step 1: Create Render Web Service**
1. Go to https://dashboard.render.com
2. Click "New +" -> "Web Service"
3. Connect your GitHub account if not already connected
4. Select the `desalination-dashboard` repository
5. Configure:
   - **Name:** `desalination-dashboard`
   - **Region:** Oregon (US West)
   - **Branch:** `main`
   - **Build Command:** `pip install -r requirements.txt`
   - **Start Command:** `gunicorn app:server --workers 2 --timeout 120`
   - **Plan:** Free
6. Click "Create Web Service"
7. Wait ~3-5 minutes for initial build and deploy

**Step 2: Verify the deployment**
1. Visit the Render URL (e.g., https://desalination-dashboard.onrender.com)
2. Verify: Dashboard loads with all three system tabs visible
3. Verify: Click "Mechanical" tab — charts and equipment list appear
4. Verify: Click "Electrical" tab — charts and battery/tank slider works
5. Verify: Click "Hybrid Builder" tab — 5 empty slots appear
6. Verify: Scorecard tab shows RAG colors for mechanical and electrical
7. Check Render logs — no errors about data.xlsx or missing modules

**If deployment fails:**
- Check Render build logs for `pip install` errors
- Check Render service logs for gunicorn startup errors
- Common fix: Ensure start command is exactly `gunicorn app:server --workers 2 --timeout 120`
  </action>
  <verify>
    <manual>User confirms dashboard loads at public URL with all tabs, charts, scorecard, and hybrid builder functional. Type "approved" with the live URL, or describe any issues.</manual>
  </verify>
  <done>Dashboard is live at a public Render URL; all features work identically to local; push-to-deploy pipeline established</done>
</task>

</tasks>

<verification>
1. GitHub repo is public and contains all deployment files
2. Render Web Service is created and running
3. Public URL loads the dashboard with all features working
4. No path errors in Render logs for data.xlsx
</verification>

<success_criteria>
The dashboard is accessible at a public Render URL. All charts, scorecard, and hybrid builder work identically to the local version. The push-to-deploy pipeline is established (push to main -> Render auto-redeploys).
</success_criteria>

<output>
After completion, create `.planning/phases/06-render-deployment/06-02-SUMMARY.md`
</output>
